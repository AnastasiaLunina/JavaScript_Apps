global.__CLIENT__ = false
const {PluginLoader} = require('..')

describe('PluginLoader', function() {

  it('#register', () => {

    const cbA = sinon.spy()
    const cbB = sinon.spy()
    const cbC = sinon.spy()

    const modA = {register: cbA, $name: 'modA'}
    const modB = (live) => {cbB()}
    modB.prototype.$name = 'modB'
    const modC = class {
      $name = 'modC';
      register() {
        cbC()
      }
    }

    const container = {}
    const loader = new PluginLoader(container)

    loader.register(modA)
    cbA.should.have.been.called
    loader.register(modB)
    cbB.should.have.been.called
    loader.register(modC)
    cbC.should.have.been.called

  })

})
